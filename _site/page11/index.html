<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on iPhones and stuff-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link rel="icon" type="image/png" href="http://blog.hannal.com/favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="Kay on the rails RSS Feed" href="http://blog.hannal.coom/feed.xml" />
  <title>
    
      Kay on the rails &middot; 
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33535239-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KS9HDB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KS9HDB');</script>
<!-- End Google Tag Manager -->
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/sdk.js#xfbml=1&appId=308847979152210&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Kay as known as Hannal walks on the rails
</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    <a class="sidebar-nav-item" href="/category/essay/">한날의 낙서</a>
    <a class="sidebar-nav-item" href="/category/kay-on-the-team/">팀과 함께하는 한날</a>
    <a class="sidebar-nav-item" href="/category/start-with-django-lectures/">Django 입문자용 강좌</a>
    <a class="sidebar-nav-item" href="/category/start-with-django-webframework/">Django 중급자용 강좌</a>
    <a class="sidebar-nav-item" href="/category/flaskon-startup-diary/">플라스콘 창업 일지</a>
    <a class="sidebar-nav-item" href="/category/devlife/">개발 생활</a>
    <a class="sidebar-nav-item" href="/category/game/">게임 생활</a>
  </nav>

  <nav class="sidebar-nav" style="margin-top: 1.2em;">
    <a class="sidebar-nav-item" href="/profile/">소개합니다</a>
    <a class="sidebar-nav-item" href="/fingers/">손 끝에 맺힌 글</a>
    <a class="sidebar-nav-item" href="/copyright/">저작권</a>

    
    <span class="sidebar-nav-item">Alpha v</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Kay on the rails</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/8/start_with_django_webframework_01/">
        1. Pystagram 기획
      </a>
    </h1>

    <span class="post-date">18 Aug 2014</span>

    <ul>
<li><a href="http://blog.hannal.com/category/start-with-django-webframework/">날로 먹는 Django 웹프레임워크 강좌 목차</a></li>
<li>마지막 갱신일시 : 2014년 08월 16일 17시 40분</li>
</ul>

<p>앞으로 우리는 Django를 이용해 <a href="http://www.instagram.com">Instagram</a>과 비슷한 서비스를 만들 겁니다. 비슷한 서비스 중에는 <a href="http://www.kakao.com/story?locale=ko">카카오 스토리</a>가 있지요. Django를 활용하여 만드는 것이지만 이름으로 조합하기 까다로우니 Python을 조합하여 Pystagram이라 이름을 짓도록 하겠습니다.</p>

<p>자, 이제 우리가 만들 것을 기획해 볼까요?</p>

<h3>1. 개요</h3>

<p>Instagram은 친구 및 가족들과 일상을 사진이나 동영상으로 찍어서 필터를 적용해 빠르고, 멋지고, 재미있게 공유할 수 있는 앱이라고 소개되어 있습니다. Pystagram은 Instagram을 기본으로 삼되 좀 더 단순하게 만들 겁니다. 그리고 쉽고 편하게 올리는 걸 최우선 정책 요소로 삼겠습니다. 이용자는 사진만 올릴 수 있고, 몇 가지 필터를 적용할 수 있습니다. 사진을 다루고 나면 동영상은 여러분이 직접 다룰 수 있게 될 겁니다.</p>

<h3>2. Pystagram 기능</h3>

<h4>(1) 사진</h4>

<p>사진은 Pystagram에서 이용자가 활동하고 다른 사람과 교류하는 핵심 매체입니다. 서비스를 만드는 데 들어간 이미지를 제외한 모든 사진은 이용자가 올린 것이고, 이 사진에 댓글을 달거나 좋다는 표시를 남기지요. 이용자가 사진 관련해서 하는 행동을 기반으로 기능을 정리해 보겠습니다.</p>

<ul>
<li>사진 올리기
<ul>
<li>필터 적용</li>
<li>미리보기 이미지(thumbnail image)</li>
<li>사진 자르기, 크기 조절</li>
</ul>

<p></li>
<li>사진 보기
<ul>
<li>좋아요 표시 남기기</li>
<li>댓글 남기기, 지우기</li>
</ul>
</li>
<li>사진 삭제</li>
<li>사람 태그 달기</li>
</ul>
<h5>사진 올리기</h5>
<p><img src="http://blog.hannal.com/assets/uploads/2014/08/01-instagram_04.png" alt="인스타그램 사진 올리기 화면" /></p>
<p>가장 기본 행동이죠. 사진은 오직 이용자 자신의 공간에만 올리며, 로그인한 모든 이용자가 사용하는 기능입니다.</p>
<p>자신의 공간에만 올린다는 건, 서비스 안에서 사진을 소유한 사람이 누구이며, 그 권한 범위가 어디까지인지 정의한 것입니다. 다른 이용자의 공간에 사진을 올리거나 공용 공간에 사진을 올리지 않는다는 것이지요. 로그인한 모든 이용자가 사용하는 기능이란, 이용자는 서비스를 이용하려면 가입하고 로그인해야 대상을 뜻하며, 이용자라면 누구나 공통되게 사진을 올릴 수 있다는 의미입니다.</p>
<ul>
<li>로그인한 이용자만 사진을 올린다.</li>
<li>사진은 이용자의 개인 공간에 올린다.</li>
</ul>
<p>이용자는 사진을 쉽고 편하게 보정해 올릴 수 있습니다. 쉽고 편하게 하는 것이 중요합니다. 그래서 여러 보정 요소와 수치가 미리 조정된(preset) 필터를 골라서 적용하며, 이용자가 직접 정교하게 보정 요소를 조정하지 못합니다. 필터는 한 번에 하나만 고르도록 하겠습니다. 여러 가지를 중첩하면 사진이 지저분해지기 일쑤이고, 지저분해진 상태를 해제하려고 이전 단계로 돌아가는 식으로 편집 단계나 기능이 들어가면 쉽고 편하게 하겠다는 목표를 잃을 것이기 때문이지요. 그리고 이 목표를 위해 이용자는 사진을 올리는 과정 중에만 필터를 적용하며, 사진을 올리고 나면 더는 편집할 수 없습니다.</p>
<ul>
<li>미리 만들어진 필터를 제공하고, 이용자는 필터를 선택해서 사진을 보정한다.</li>
<li>사진을 올릴 때에만 보정하며, 이미 올라간 사진은 보정할 수 없다.</li>
</ul>
<p>Instagram은 가로(width) 640픽셀, 세로(height) 640픽셀짜리 정사각형 사진만 표시됩니다. 그런데 사진은 대개 직사각형이므로 정사각형 모양으로 잘라야 하는데, Instagram은 사진을 편집하는 과정 중에 정사각형 틀에 맞추어 사진을 잘라내도록 합니다.</p>
<p>우리는 좀 더 단순하게 할 예정입니다. 사진을 축소한 다음에 정사각형으로 잘라내는 거죠. 어쨌든 Pystagram도 정사각형으로 사진을 잘라냅시다. 크기는 Instagram과 같게 640x640으로 하겠습니다. 그런데 이용자가 가로나 세로 길이 중 어느 하나라도 640픽셀보다 작은 사진을 올리면 어떻게 할까요? 이런 사진을 받아들인다면 640픽셀로 사진을 늘려야 하는데, 사진을 늘리면 픽셀이 뭉개져서 썩 예쁘지 않습니다. 예쁘지 않은 사진을 올려서 손해 보는 건 엄밀히 말해 이용자이지만, 물 관리(?) 차원에서 품질이 너무 떨어지는 사진은 걸러내고자 합니다. 멋진 사진은 아니더라도 크기(길이)만은 최소한 지켜야 하는 품질을 제한하는 거죠. 그래서 가로, 세로 중 어느 한 변이라도 640픽셀보다 짧은 사진은 등록할 수 없도록 하겠습니다.</p>
<p>이외 더 필요한 기능은 뭐가 있을까요? 미리보기 이미지(Thumbnail image)를 만들어야겠네요. 굉장히 자주 표시(호출)될 테니 최종 결과물 사진이 저장될 때마다 미리보기 이미지도 생성해야 합니다.</p>
<ul>
<li>사진은 가로나 세로 길이 모두 640픽셀 이상이어야 한다.</li>
<li>최종 결과물은 640x640 정사각형으로 표시하며, 이 크기에 맞게 비율 축소/확대하거나 자른다. 이용자가 표현할 영역을 지정할 순 없다.</li>
<li>최종 결과물 사진을 저장할 때 미리보기 이미지(thumbnail image)를 만들어 저장한다.</li>
</ul>
<p>자, 마지막으로 사진을 올릴 때 서버에 접근할 URL(Uniform Resource Locator)을 정하겠습니다. 웹과는 달리 모바일에서는 이용자가 사진을 올릴 URL을 알 필요가 없습니다. 입력하기 편하든 어렵든 상관없지요. 대신 우리는 URL을 보면 이게 어떤 작동을 하고 어떤 클래스나 함수와 관련되는지 바로 알아보기 편한 게 좋을 것 같습니다. 주소 그 자체가 자원이나 행동을 표현하는 거지요. 나중에 주소는 다시 다듬기로 하고 일단은 다음가 같은 주소로 접근해서 사진을 올리도록 하겠습니다.</p>
<p>protocol://domain/photo/upload/</p>
<p>간단히 줄여서 /photo/upload/ 입니다. 이 주소는 나중에 /photo/ 로 바꿀 겁니다. 걱정 마세요. Django에서 URL을 바꾸고 그 URL에 관련된 기능을 연결하는 건 아주 쉽고 간단합니다. 이 주소 하나로 사진 올리는 인터페이스와 사진을 실제로 받아서 처리하는 기능 모두 처리할 겁니다.</p>
<h5>사진 보기</h5>
<p><img src="http://blog.hannal.com/assets/uploads/2014/08/01-instagram_05.png" alt="" /></p>
<p>사진 올리기만큼이나 기본 기능입니다. Pystagram에서 사진을 보는 경로는 크게 두 가지입니다. 하나는 목록으로 여러 사진을 보는 것이고, 다른 하나는 개별 사진을 보는 것입니다. Instagram은 모바일이 기본 영역이고 모바일에서 돌아가는 서비스 내 사진을 인터넷에서 접근하여 보는 것이 보조 기능이어서 개별 사진을 보는 것도 모바일에서 보는 것과 웹에서 보는 것을 구분했습니다. 대신 웹에서 여러 사진을 목록으로 볼 수 없습니다. 그런 페이지를 제공하지 않거든요. 그리고 모바일에서는 개별로 보든 목록 중에 보든 같은 화면인데, 우리도 그렇게 하겠습니다.</p>
<ul>
<li>사진은 목록 형식으로 나열하거나 개별 사진만 따로 본다.</li>
<li>모바일에서는 목록으로 보든 개별로 보든 동일한 화면 디자인을 따른다.</li>
<li>웹에 개별 사진 단위로 게재(공유)할 수 있으며, 별도 화면 디자인을 따른다.</li>
<li>웹에서는 개별 사진만 볼 수 있다.</li>
</ul>
<p>각 사진에 표시할 정보를 살펴봅시다. 그다지 많지 않습니다. 먼저 사진을 올릴 때 발생하는 정보로는 최종 결과물 사진, 올린 사람, 작성일시, 사진에 넣은 본문 정도입니다. 사진에 관련된 사람이 누구인지 태그를 달 수도 있는데, 이 태그 거는 건 손도 많이 가고 번거로우니 사진을 편집하고 올리는 과정에서는 빼겠습니다. 쉽고 편하게, 쉽고 편하게. ^^</p>
<p>이미 올라간 사진에 이용자가 추가 행동을 하고, 이 내용도 화면에 표시돼야 합니다. 누가 사진에 남겨진 하트(좋아요) 표식을 남겼는지, 댓글은 뭐가 있으며, 관련된 사람으로 태그 걸린 사람은 누구인지, 그리고 이외 행동을 선택하는 버튼도 필요하고요. Instagram은 관련된 위치도 지정할 수 있는데, 이 기능은 일단 빼겠습니다.</p>
<p>댓글도 단순하게 가겠습니다. 작성자와 댓글 본문, 작성일시. 댓글 작성자는 자신의 댓글에 한하여, 댓글이 달린 사진의 소유자는 사진에 달린 댓글에 한하여 댓글을 지우는 삭제 버튼이 출력돼야 합니다. 그리고 댓글에 답글을 달면 답글을 받은 사람에게 알려주면 좋겠네요.</p>
<ul>
<li>사진을 올릴 때 생성된 정보 : 최종결과물 사진, 작성자, 작성일시, 본문</li>
<li>사진에 추가되는 정보 : 좋아요 버튼, 좋아요 표시 남긴 사람, 댓글, 태그 걸린 사람
<ul>
<li>댓글 정보 : 작성자, 댓글 본문, 작성일시</li>
<li>댓글 관련 행동 : 삭제 버튼, 사용자 지정해서 댓글 달기</li>
</ul>
</li>
</ul>
<p>기본 기획은 이 정도로 하고, 필요한 기능이 있으면 나중에 따로 다루도록 하겠습니다. ^^</p>
<p>이제 사진 관련 URL을 정하겠습니다. 사진을 목록으로 보는 상황은 따로 기획하기로 하고, 개별 사진을 보고, 그 사진에 댓글을 달거나 좋아요를 누르는 행동을 하는 URL부터 정하지요.</p>
<p>개별 사진을 보는 건 /photo/&lt; 사진 ID&gt;/로 하겠습니다. 사진 ID 양옆에 있는 꺾쇠는 가변하는 값을 뜻합니다. 사진 ID가 1일 수도 있고 2일 수도 있으니까요. 사진에 좋아요를 누르는 건 어떻게 할까요? /like/&lt; 사진 ID&gt;/ 라고 해도 나쁘지 않지만, /like/ 문자열 뒤에 숫자만 있으면 이게 사진 ID를 뜻하는 것인지 좋아요 행위 자체를 기록한 좋아요 ID인지 잘 구분되지 않습니다. 우리는 특정 사진(/photo/&lt; 사진 ID&gt;/)에 좋아요 표시를(like) 남기는 것이니 /photo/&lt; 사진 ID&gt;/like/ 으로 좋아요 행위를 일으키는 URL을 하도록 하겠습니다. 행위나 자원을 나타내는 문자열이 있고, 그 문자열의 대상이 되는 값(ID)를 적는 구조이지요.</p>
<p>댓글도 마찬가지 규칙을 따르겠습니다. 댓글은 특정 사진에 다는 것이니까 /photo/&lt; 사진 ID&gt;/comment/ 로 하겠습니다. 특정 댓글을 지우려면 어떤 댓글인지 알아야겠지요? 앞서 정한 규칙에 따라 /photo/&lt; 사진 ID&gt;/comment/&lt; 댓글 ID&gt;/delete/ 로 하겠습니다. /comment/&lt; 댓글 ID&gt;/delete/ 로 해도 별 상관없습니다. 이후 강좌에서 이와 관련된 내용을 다루겠습니다.</p>
<p>사진에 달린 댓글은 어떻게 가져와야 할까요? /photo/&lt; 사진 ID&gt;/comment/ 이 URL은 특정 댓글을 지칭하는 데 사용하는 주소 규칙입니다. 사진에 달린 댓글은 comment를 복수형으로 취해 /photo/&lt; 사진 ID&gt;/comments/ 로 하겠습니다. s 한 글자 차이라서 구분이 잘 안 간다고요? 일리 있는 지적입니다. 그럼 눈에 확 들어오게 /photo/&lt; 사진 ID&gt;/get<em>comments/ 라고 하겠습니다. 일단은요.</p>
<p>태그도 좋아요나 댓글과 별다를 바 없습니다. /photo/&lt; 사진 ID&gt;/tag/ 라고 하겠습니다.</p>
<p>개별 사진과 관련된 URL을 정리해 보겠습니다.</p>
<ul>
<li>개별 사진 보기 : /photo/&lt; 사진 ID&gt;/</li>
<li>사진에 좋아요 누르기 : /photo/&lt; 사진 ID&gt;/like/</li>
<li>사진에 댓글 달기 : /photo/&lt; 사진 ID&gt;/comment/
<ul>
<li>사진에 달린 댓글 가져오기 : /photo/&lt; 사진 ID&gt;/get</em>comments/</li>
<li>사진에 달린 댓글 지우기 : /photo/&lt; 사진 ID&gt;/comment/&lt; 댓글 ID&gt;/delete/</li>
</ul>
</li>
<li>사진에 태그 달기 : /photo/&lt; 사진 ID&gt;/tag/</li>
</ul>
<h5>여러 사진 보기</h5>
<p><img src="http://blog.hannal.com/assets/uploads/2014/08/01-instagram_01.png" alt="" /></p>
<p>사진을 여러 개 나열해서 보는 상황은 어떠한 경우일까요? 우선 이용자가 자신이 올린 사진들을 보는 경우가 있습니다. 내가 구독(following)하는 이용자들이 올린 사진을 보는 경우도 있고, 사람이나 기계가 추려낸 사진들, 가령 인기 사진들도 여러 사진을 보는 경우입니다. 더 다양한 경우가 있겠지만 우리는 이 세 경우만 만들도록 하겠습니다.</p>
<p>여러 사진을 보는 이 세 페이지는 오직 모바일에서만 이용할 수 있습니다. 그리고 모바일에서는 개별 사진을 따로 보는 화면 디자인이나 목록으로 나열된 개별 사진의 화면 디자인을 굳이 구분할 필요는 없습니다. 개별 사진 영역을 반복 출력하면 되니까요. 결국 출력되는 사진만 다를 뿐, 화면 디자인 요소는 이 세 페이지가 같습니다. 그렇다면 따로 화면 디자인을 할 필요가 없겠군요. 사진 보기 기획할 때 다 했으니까요. ^^</p>
<p>그럼 각 페이지 별 기획을 하겠습니다. 먼저 내가 구독(following)하고 있는 이용자들이 올린 사진을 보는 페이지부터 볼까요. 페이스북이나 트위터를 이용하신다면 타임라인(timeline)이라는 페이지나 기능에 익숙하실 겁니다. 자신의 글이나 사진을 포함해서 친구, 혹은 나와 관련된 컨텐츠를 시간 역순으로 나열하는 컨텐츠 연대표이죠.</p>
<p>이용자의 타임라인은 모든 이용자가 이용하는 기능이지만 이용자마다 표시되는 내용이 다른 공간입니다. 누구나 쓰는 공통 기능이며 다른 이용자가 내 타인라인을 볼 수 없으므로 굳이 타임라인 페이지를 URL로 구분할 필요는 없습니다. 그래서 /timeline/이라는 URL을 쓰겠습니다. 타임라인에는 어떤 정보를 표시하면 좋을까요? 자신이 올린 사진, 구독하는(following) 이용자의 사진, 나를 태그한 사진, 나를 언급한 댓글이 있는 사진을 가져와서 출력하면 얼추 그럴싸한 타임라인이 될 것 같습니다. 자세한 건 이 기능을 구현할 때 다루겠습니다.</p>
<p>이번엔 선정된 사진을 보는 곳. 뭘 기준으로 선정할까요? 무난하게 정해진 시간 동안 인기를 끈 사진을 가져오는 인기 사진을 가져오도록 하겠습니다. 주소는 모든 이용자가 동일한 내용을 보는 공동 구역이니 그에 어울리는 URL로 정해야겠네요. /popular/로 하겠습니다.</p>
<p>마지막으로 이용자가 자신이 올린 사진들을 보는 건 이용자 프로필 페이지에서 다루겠습니다. URL만 먼저 정하자면, /user/&lt; 이용자 ID&gt;/ 로 하겠습니다.</p>
<p>그럼 여러 사진을 보는 페이지와 관련된 URL을 정리해 보지요.</p>
<ul>
<li>인기 사진 : /popular/</li>
<li>이용자 개별 타임라인 : /timeline/</li>
<li>특정 이용자가 올린 사진 : /user/&lt; 이용자 ID&gt;/</li>
</ul>
<h5>사진 삭제</h5>
<p>사진 삭제는 간단합니다. 자신의 사진에 한해서 삭제하며, 개별 사진 영역에서 사진 삭제 버튼을 눌러서 지우면 됩니다. 지울 때 정말 지울 건지 한 번 더 물어보면 좋겠고요.</p>
<p>사진을 지우는 URL은 사진에 좋아요 표시를 남기거나 댓글을 남기는 규칙을 따르면 됩니다.</p>
<p>/photo/&lt; 사진 ID&gt;/delete/</p>
<p>사진을 지우면 사진 파일도 지우고, 사진에 달린 활동들도 지우도록 하겠습니다.</p>
<h4>(2) 이용자</h4>
<p>이용자 관련 기능은 그다지 많진 않습니다.</p>
<ul>
<li>회원 가입과 탈퇴</li>
<li>로그인, 로그아웃</li>
<li>비밀번호 찾기</li>
<li>프로필 보기</li>
<li>구독하기 (팔로잉(following) 기능)</li>
</ul>
<h5>회원 가입</h5>
<p>Instagram엔 직접 가입하는 방법과 페이스북으로 연결하여 가입하는 방법으로 회원 가입합니다. Pystagram은 ID와 비밀번호를 입력하여 직접 가입하는 방법을 기본으로 하겠습니다. 페이스북으로 연결하여 가입하는 기능은 직접 구현하진 않고 원리나 방식만 설명할 예정입니다.</p>
<p>회원 가입에 필요한 정보는 간단하게 받습니다. 사용할 ID, 비밀번호, 그리고 전자우편 주소. 그외 정보는 가입한 후에 언제든지 입력하도록 합니다. 다만 봇(bot)으로 계정을 막 생성하려는 나쁜 사람도 있으니 <a href="http://ko.wikipedia.org/wiki/CAPTCHA">캡챠(Captcha)</a> 기능을 구현할 필요는 있어 보입니다. 이용자가 회원 가입에 필요한 정보를 제출하면 전자우편 주소가 실제로 존재하는지 확인도 해보겠습니다. 가입 확인 전자우편을 보내는 거죠. 전자우편 주소 확인을 받지 않은 이용자는 로그인만 할 수 있고 나머지 기능은 사용할 수 없도록 권한을 제한합니다.</p>
<p>회원 가입 URL은 /accounts/registration/ 을 쓰도록 하겠습니다. 좀 긴데, 의미 전달성이 좋고 이용자가 저 URL을 인지할 일이 없는 데다 Django에서 따로 설정 안 하면 쓰게 되는 기본 주소라서 이 주소로 선택했습니다. ^^</p>
<h5>로그인, 로그아웃</h5>
<p>특별한 건 없습니다. 이용자가 입력한 아이디와 비밀번호로 로그인을 하고, 로그인한 이용자에 한하여 로그아웃을 합니다.</p>
<p>URL은 무난하게 /accounts/login/ 과 /accounts/logout/ 을 쓰도록 하겠습니다. 회원 가입 URL과 관련지은 주소이지요.</p>
<h5>비밀번호 찾기</h5>
<p>이 기능은 여러분이 직접 구현하셔야 합니다. :) 전자우편 주소 확인하는 기능을 활용하면 아주 간단하게 구현하실 수 있습니다.</p>
<h5>프로필 보기</h5>
<p>프로필 페이지는 각 이용자의 간단한 소개와 그 이용자가 올린 사진을 나열해 보여주는 곳입니다. 특정 이용자가 올린 사진, 또는 자신이 올린 사진만 보는 곳이기도 하지요. 주소는 앞서 정한 /user/&lt; 이용자 ID&gt;/ 입니다.</p>
<p>프로필 페이지에서 간단한 소개 영역에 표시할 정보는 많지 않습니다. 이용자가 입력한 정보, 그리고 이용자가 서비스를 이용하며 발생시킨 정보 정도네요.</p>
<p>이용자가 입력한 정보 중 겉으로 드러낼 만한 정보는 이용자 ID와 이용자 프로필 사진 정도입니다.</p>
<p>이용자가 서비스를 이용하여 발생한 정보는 이용자가 구독하는(following) 이용자들, 이용자를 구독하는 이용자들(followers), 그리고 이용자가 올린 사진이 있습니다. 이용자가 구독하는 팔로잉 페이지는 /user/&lt; 이용자 ID&gt;/following/, 이용자를 구독하는 팔로워 페이지는 /user/&lt; 이용자 ID&gt;/followers/ 로 URL을 정하겠습니다. 이용자가 올린 사진은 이용자 프로필 페이지에 바로 나열하면 되고요. 하지만 웹에서는 사진을 나열해 표시하지 않기로 했으니 이용자가 올린 사진 중 하나를 무작위로 선택해서 표시하도록 하겠습니다.</p>
<ul>
<li>간단한 소개 정보
<ul>
<li>이용자 프로필 사진</li>
<li>이용자 ID</li>
</ul>
</li>
<li>이용자가 사진
<ul>
<li>시간 역순으로 나열. 무한 스크롤 방식.</li>
<li>웹에서는 이용자가 올린 사진 중 하나를 무작위로 선택해서 표시.</li>
</ul>
</li>
<li>팔로잉
<ul>
<li>팔로잉 수</li>
<li>URL : /user/&lt; 이용자 ID&gt;/following/</li>
<li>누르면 하위 페이지(팔로잉 페이지)로 이동</li>
<li>각 이용자의 프로필 사진과 해당 이용자의 프로필 페이지 이동 UI(링크)</li>
</ul>
</li>
<li>팔로워
<ul>
<li>팔로워 수</li>
<li>URL : /user/&lt; 이용자 ID&gt;/followers/</li>
<li>이외 내용은 팔로잉과 동일</li>
</ul>
</li>
</ul>
<h5>구독하기 (following)</h5>
<p>구독 기능은 구독 대상 이용자가 올리는 사진을 자신의 타임라인에서 편하게 보도록 합니다. 쌍방이 관계를 맺어야 하는 친구 관계와는 달리 구독자가 구독 대상을 구독하면 그만입니다. URL은 /user/&lt; 이용자 ID&gt;/follow/ 로 하겠습니다. 구독과 구독 해제를 작동시키는 URL을 나눌 필요는 없습니다. 구독하고 있지 않은 상태에서 구독 기능을 호출하면 구독 상태로 바꾸고, 구독 중인 상태에서 또 호출하면 구독 상태를 해제하면 되니까요.</p>
<h4>(3) 기능 총 정리</h4>
<p>지금까지 기획한 기능을 총 정리해보겠습니다.</p>
<ul>
<li>사진
<ul>
<li>사진 올리기
<ul>
<li>필터 적용</li>
<li>미리보기 이미지(thumbnail image)</li>
<li>사진 자르기, 크기 조절</li>
</ul>
</li>
<li>사진 보기
<ul>
<li>좋아요 표시 남기기</li>
<li>댓글 남기기, 지우기</li>
</ul>
</li>
<li>사진 삭제</li>
<li>사람 태그 달기</li>
</ul>
</li>
<li>이용자/회원
<ul>
<li>회원 가입과 탈퇴</li>
<li>로그인, 로그아웃</li>
<li>비밀번호 찾기</li>
<li>프로필 보기
<ul>
<li>간단한 소개</li>
<li>팔로잉, 팔로워</li>
<li>이용자가 올린 사진</li>
</ul>
</li>
<li>구독하기 (팔로잉(following) 기능)</li>
</ul>
</li>
<li>사진 모아보기
<ul>
<li>타임라인 : 친구 사진들 보기</li>
<li>인기 사진들 보기</li>
<li>특정 이용자의 사진 보기 =&gt; 프로필 보기</li>
</ul>
</li>
</ul>
<p>큼직하게 묶어서 정리했는데 생각보다 많네요. 하지만 Django가 제공하는 기능을 쓰면 무척 쉽게 구현할 수 있습니다.</p>
<h4>이외</h4>
<p>이외에 필요한 페이지나 기능이 많이 남았습니다. 몇 가지만 이곳에 정리하고, 나머지는 각 기능을 구현하면서 그때 그때 만들겠습니다.</p>
<ul>
<li>로그아웃 상태에서 접속한 첫 화면</li>
<li>로그인 실패</li>
<li>없는 페이지에 접속했을 때 안내하는 페이지 (일명 404 페이지)</li>
<li>허용하지 않는 페이지에 접속한 경우 처리
<ul>
<li>기획 정책 상 허용하지 않는 경우</li>
<li>접근 권한이 없는 경우</li>
</ul>
</li>
<li>오류가 발생했을 때 안내하는 페이지</li>
<li>관리자 영역</li>
<li>존재하는 ID나 전자우편 주소인지 검사</li>
</ul>
<h3>3. 페이지 구성</h3>
<p>정리한 기능으로 페이지(scene)를 정리해 보겠습니다.</p>
<p><a href="http://blog.hannal.com/assets/uploads/2014/08/01-Scene_flow.png"><img src="http://blog.hannal.com/assets/uploads/2014/08/01-Scene_flow-400x274.png" alt="페이지 흐름 및 연결도" /></a><br />
&lt; 위 이미지는 클릭하면 크게 볼 수 있습니다. &gt;</p>
<p>둥근 모서리 사각형은 개별 페이지를 뜻합니다. 이 중에서 파란 바탕색이 적용된 사각형은 상위 페이지입니다. Instagram 모바일 앱으로 예를 들면, 앱 최하단에 있는 버튼들이 이 상위 페이지에 연결된 것인데, 페이지 안내(navigation) UI 등으로 접근하는 페이지이지요. 흰 바탕인 사각형은 이러한 상위 페이지에 속해있는 하위 페이지입니다.</p>
<p>직각 모서리 사각형은 기능을 뜻합니다. 기능 중에는 페이지로 연결되기도 하는데, 편의상 기능으로만 표시했습니다. 기능 중 왼쪽에 있는 것은 자신의 영역에서 실행하는 기능이며, 오른쪽은 다른 이용자의 영역에서 혹은 다른 이용자가 내 영역에서 실행하는 기능입니다.</p>
<p>펼쳐 놓으니 뭔가 많아 보이지만, 실제로는 페이지 이동이나 기능 사용이 대부분 한두 단계 안에서 이뤄집니다. 이런 간단명료한 흐름이 Instagram의 매력이고, Pystagram도 그런 매력을 따릅니다. 고민 많이 했을 Instagram 개발자의 노고에 박수를 보내 봅니다.</p>
<hr />
<p>이것으로 강좌 첫 회를 마칩니다. 2회에선 Django도 설치하고, 개발 환경을 꾸려볼 겁니다. 내용이 그다지 많진 않을 겁니다. 그럼 강좌 2회에서 뵙겠습니다.</p></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2014/8/start_with_django_webframework_00/">
        날로 먹는 Django 웹프레임워크 강좌, 여는 글
      </a>
    </h1>

    <span class="post-date">04 Aug 2014</span>

    <h3>hello world</h3>

<p>2008년 6월 1일부터 8월 10일까지 저는 Python과 Django로 웹 게시판을 만드는 강좌인 “<a href="http://blog.hannal.com/01-python_django_lecture/">날로 먹는 Django 웹 프로그래밍</a>”을 연재했습니다. 6년이 훌쩍 지났지만 여전히 저 강좌를 보러 제 블로그에 오시는 분이 참 많습니다. 구글에서 Django 강좌를 검색하면 제 강좌가 맨 위에 나오기도 하고 국내 포털 서비스에서도 Django 강좌는 제 블로그가 나오거나 제 강좌를 그대로 담아간 곳이 나오기도 하니, Django 한국어 강좌 중에선 꽤 유명한가 봅니다.</p>

<p>부담을 안 느낀 건 아닙니다. Django 최신 버전에서는 다소 문제가 있기도 하고, 윈도우즈처럼 제가 사용하지 않는 환경에 대해 질문하신 분을 도와드리지도 못 했거든요. 적당한 시기에 잊혀지면 마음이 편할텐데, 여전히 두루 읽히며 여러 입문자가 고생하고 있을 모습이 눈에 선하니 미안한 마음이 들곤 했습니다.</p>

<p>그래서 6년 만에 후속 강좌를 연재하려 합니다. 이름은 “날로 먹는 Django <strong>웹 프레임워크</strong>”입니다. 지난 강좌는 Django 웹 프레임워크로 웹 프로그래밍을 입문하려는 사람을 대상으로 했다면, 이번 강좌는 Django 자체를 좀 더 들여다보고 활용해보는 내용을 담을 예정입니다. 그래서 이번 후속 강좌에선 웹 프로그래밍을 조금이라도 해봤거나 Django, Rails 같은 웹 프레임워크로 hello world라도 출력해본 분을 대상으로 합니다.</p>

<h3>연재 계획</h3>

<p><strong>8월 18일</strong>에 연재를 시작하며 내용에 따라서 10~14일에 한 회씩 게재하도록 최선을 다할 겁니다. 지난 강좌는 일주일에 한 회씩 연재했는데 정말 힘들더군요.</p>

<p>연재는 제 블로그에 하며 소스 코드는 GitHub에서 관리합니다. 강좌 본문도 GitHub에서 관리하는데, 원문을 사본으로 담는 역할이며 피드백을 주고 받거나 서식이 적용된 원본은 제 블로그에 게재됩니다. (그래서 강좌 본문을 통채로 복사해서 올리시지 않는 게 낫습니다)</p>

<p>제 개발 환경인 Mac OS X를 기반으로 하기 때문에 윈도우즈나 리눅스 등 다른 OS를 쓰시는 분은 좀 더 수고하셔야 할 지도 모릅니다. 다행히 인터넷에는 각 환경 별로 자신의 지식과 경험을 공유한 고마운 사람이 무척 많습니다.</p>

<p>각 연재분에는 마지막 수정일시가 표시됩니다. 여러분이 피드백을 <strong>제 블로그에 게재된 강좌에 남겨 주시면</strong> 참조하여 반영하도록 할 것이며, 그때마다 수정일시도 변경됩니다.</p>

<p>이번 강좌에서는 instagram 같은 웹 서비스를 만들 겁니다. 웹 게시판이나 블로그를 만드는 자료는 워낙 많아서 다른 걸 만들고 싶었는데, 웹 게시판이나 블로그처럼 다양한 구현을 경험할 수 있고 실용성도 있을 것 같아 선택했습니다.</p>

<h3>왜 Django 웹 프레임워크 강좌인가?</h3>

<p>이번 강좌 연재를 위해 사전 조사를 하던 중에 Django는 이미 덩치가 커서 초보자나 입문자가 강좌로 익히기엔 부담스럽지 않겠냐는 의견을 받았습니다. <a href="http://flask.pocoo.org/">Flask</a>는 아주 가볍고 작은 웹 프레임워크이어서 웹 프레임워크를 사용하여 웹 프로그래밍을 하는 학습 목표에 집중하기에 좋지 않겠냐는 것이지요.</p>

<p>제가 Django를 처음 접했던 0.96 버전에도 많은 기능이 있었는데, 최근 정식 버전인 1.6엔 더 많은 기능이 포함되어 있습니다. 강좌를 준비하며 목표 대상을 먼저 만들어 봤는데, Django가 프로젝트를 잘 만들 수 있도록 저는 교통 정리만 하는 기분이 들 정도로 많은 기능이 있습니다. 이래서는 프로그래밍을 제대로 학습하지 못 할 것 같고 오류와 같은 문제가 생기면 자칫 미로에 빠져 길을 잃을 것 같아서 Django를 <strong>도구</strong>로 쓸 지 고민하기도 했습니다.</p>

<p>결국 Django를 선택했습니다. 이유는 오랜 시간 많은 사람에게 사랑 받으며 사용되고 있고, 그래서 수많은 질문과 답변, 코드 조각과 유용한 구현체(library 등)가 존재하기 때문입니다. 제 강좌에서 부족한 부분은 인터넷에서 얼마든지 채우실 수 있습니다. 윈도우즈에서 MySQL를 설치했는데 안 된다고요? 윈도우즈에 MySQL을 설치해본 지 6년도 훌쩍 넘은 제게 질문을 하는 것 보다는 인터넷에서 오류 문구 등으로 답변을 찾는 게 훨씬 빠르고 유용할 것입니다.</p>

<p>마찬가지 이유로 JavaScript 라이브러리는 jQuery를 사용할 것이며, 다른 도구도 같은 기준으로 선택할 것입니다.</p>

<h3>다룰 내용과 다루지 않을 내용</h3>

<p>저는 이번 강좌에서 <a href="https://docs.djangoproject.com/">Djang 공식 문서</a>에서 다루는 내용 전반을 두루 활용하여 서비스를 만들 겁니다. 또 우리가 만든 기능을 다른 오픈 소스 라이브러리로 바꿔보기도 할 겁니다. 하지만 최대한 Django가 제공하는 기능을 활용하는 것이 목표입니다.</p>

<p>하지만 Django 웹 프레임워크 범위를 넘는 내용은 다루지 않을 예정입니다. Apache나 NGINX에 우리가 만든 Django 프로젝트를 올리는 내용은 다루지만, Apache나 NGINX 설정이나 최적화 방법 등은 다루지 않습니다. 코딩 작업에 필요한 도구를 소개하지만 그 도구를 사용하는 방법은 다루지 않습니다. Django로 작동하는 기능을 구현하는 데 집중하지만 좋은 Python 코드나 최적화 된 알고리즘을 다루진 않습니다.</p>

<h3>저작권 및 재배포 금지</h3>

<p>“날로 먹는 Django 웹 프레임워크” 강좌는 제 저작물이며, 제가 직접 게재하는 곳을 제외한 그 어떠한 곳도 무단으로 배포해서는 안 됩니다. 무단배포를 막는 이유는, 제가 강좌 내용을 수정하더라도 무단으로 내용을 담아가 외부에 게재된 자료엔 반영할 수 없어서 자칫 틀리거나 문제가 있는 내용이 방치될 수 있기 때문입니다.</p>

<p>저는 블로그를 운영하는 10년 동안 각 글의 고유주소(permalink)를 유지하려고 많이 신경써 왔습니다. 일부 첨부 파일이 누락되는 경우는 있지만, 글 본문 자체는 10년 넘게 동일한 주소로 접근할 수 있으며, 글 주소가 바뀌어도 예전 주소로 접근할 수 있습니다. 더구나 이번 강좌는 사본을 GitHub에도 남겨 놓을 겁니다. 그러니 제 블로그에 게재된 연재 글의 주소를 연결(link)하기만 해주시길 바랍니다. 여러분께서 제 강좌를 악용할 목적을 갖고 있지 않는 한, 외부 공간에 무단 배포할 이유는 전혀 없습니다. 오히려 제가 직접 게재하고 관리하는 곳에 방문하여 강좌를 보는 것이 이득입니다. :)</p>

<h3>예고를 마치며</h3>

<p>이렇게 예고 했으니 이제 정말 연재를 시작할 수 밖에 없게 됐네요. 어느 정도 길이가 될 지 모르겠지만 열심히 연재해 보겠습니다. :)</p>

<p><a href="http://blog.hannal.com/category/start-with-django-webframework/">날로 먹는 Django 웹프레임워크 강좌 목차</a></p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page12">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page10">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
