<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on iPhones and stuff-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link rel="icon" type="image/png" href="http://blog.hannal.com/favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="Kay on the rails RSS Feed" href="http://blog.hannal.coom/feed.xml" />
  <title>
    
      Kay on the rails &middot; 
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>


    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/sdk.js#xfbml=1&appId=308847979152210&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Kay as known as Hannal walks on the rails
</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    <a class="sidebar-nav-item" href="/category/essay/">한날의 낙서</a>
    <a class="sidebar-nav-item" href="/category/kay-on-the-team/">팀과 함께하는 한날</a>
    <a class="sidebar-nav-item" href="/category/start-with-django-lectures/">Django 입문자용 강좌</a>
    <a class="sidebar-nav-item" href="/category/start-with-django-webframework/">Django 중급자용 강좌</a>
    <a class="sidebar-nav-item" href="/category/flaskon-startup-diary/">플라스콘 창업 일지</a>
    <a class="sidebar-nav-item" href="/category/game/">게임 생활</a>
  </nav>

  <nav class="sidebar-nav" style="margin-top: 1.2em;">
    <a class="sidebar-nav-item" href="/profile/">소개합니다</a>
    <a class="sidebar-nav-item" href="/fingers/">손 끝에 맺힌 글</a>
    <a class="sidebar-nav-item" href="/copyright/">저작권</a>

    
    <span class="sidebar-nav-item">Alpha v</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Kay on the rails</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/2/99_1-python_django_lecture/">
        Django 1.0에서 Admin 기능 쓰기 - 부록편
      </a>
    </h1>

    <span class="post-date">01 Feb 2009</span>

    <p>안녕하세요,<span> </span>한날입니다.</p>

<p>오랜만에 Django 강좌 글로 뵙습니다.</p>

<p>지난 <span>2008</span>년 <span>8</span>월에 강좌 연재를 마친 뒤 얼마 후에 Django 1.0판이 새로 나왔습니다. 꽤 많은 점이 바뀌었더군요. 대체로 이전 정식판인 0.96를 기준으로 개발한 코드라도 잘 작동하는데, 일부 기능은 아예 작동하지 않기도 합니다.</p>

<p>이 연재글은 “<a href="http://blog.hannal.com/01-python_django_lecture/">날로 먹는 Django 웹 프로그래밍 강좌</a>” 을 보완하여 현재 정식으로 배포되고 있는 Django 1.0판에서 제대로 작동시키는 내용을 담습니다. 또, 본 강좌에서 다루지 않은 내용 일부를 추가하려 합니다. 즉, 새 강좌 연재는 아니고, 부록에 해당하는 것이지요.</p>

<p>그럼 바로 시작하겠습니다.</p>

<h3>Admin 영역 사용법 변화</h3>

<h4>admin.py 만들기</h4>

<p>“<a href="http://blog.hannal.com/05_1-python_django_lecture/">청) 컨트롤러(뷰) - 글 목록과 글 보기 기능 (5편 1/3)</a>”에서 Django의 Admin 영역/기능을 다룹니다. 그런데 1.0판부터 Admin 기능을 쓰는 방법이 크게 바뀌었습니다.</p>

<p>기존에는 각 모델마다 Admin 이라는 클래스를 만들어서 썼습니다.</p>

<blockquote>
<pre><code>class Entries(models.Model):
    Title = models.CharField(max_length=80, null=False)

    class Admin:
        pass</code></pre>
</blockquote>

<p>이런 식이죠. 하지만, 1.0판부터는 admin.py파일을 따로 만들어야 합니다.<sup><a href="http://blog.hannal.com/99_1-python_django_lecture/comment-page-1/#comment-226">참고1)</a></sup></p>

<p>이 파일은 각 어플리케이션마다 씁니다. 본 강좌에서 우리는 blog 라는 어플리케이션을 만들었는데(manage.py startapp blog), 이 어플리케이션 안에, 그러니까 어플리케이션 디렉토리(폴더) 안에 admin.py 파일을 만들면 됩니다.</p>

<p>admin.py 파일을 만든 뒤 관련 모듈을 가져오겠습니다.</p>

<blockquote>
<pre><code>from django.contrib import admin</code></pre>
</blockquote>

<p>이 admin 모듈을 써서 Django admin 영역에서 다룰 모델을 등록할 수 있습니다. 바로 admin.site 에 있는 register 메서드, 즉 admin.site.register 로 하는 것이지요.</p>

<p>먼저 Admin 영역에서 다룰 모델을 가져옵니다. 편의상 Entries 를 해보겠습니다.</p>

<blockquote>
<pre><code>from hannal.blog.models import Entries</code></pre>
</blockquote>

<p>from 경로는 여러분이 어떻게 프로젝트를 만들고 어플리케이션 이름을 지었는지에 따라 다릅니다.</p>

<p>이렇게 가져온 모델을 admin.site.register 로 등록합니다.</p>

<blockquote>
<pre><code>admin.site.register(Entries)</code></pre>
</blockquote>

<p>이렇게 하면 Django admin 영역에서 Entries 모델을 다룰 수 있습니다.</p>

<h4>Admin 영역에서 좀 더 예쁘게 하기</h4>

<p>Django admin 영역에서 다룰 모델을 등록하는 것 말고도 화면에 나타나는 영역을 바꿀 수 있습니다. 본 강좌에서는 “admin 영역에서 자료 좀 더 예쁘게 나타내기”라는 단락에 나와있지요. 이 부분도 Django 1.0판에서 조금 바뀌었습니다. Entries 모델을 기준으로 예를 들어서, 우리는 글 번호와 제목, 작성일시만 뜨게 해보겠습니다.</p>

<p>admin.site.register 위에 아래와 같이 클래스를 하나 만듭니다.</p>

<blockquote>
<pre><code>class EntriesAdmin(admin.ModelAdmin):
    pass</code></pre>
</blockquote>

<p>이 클래스는 Admin 영역에서 Entries 모델을 어떻게 출력하고 다루게 할 것인지에 대한 정보를 담는 역할을 합니다. 자세한 내용은 잠시 뒤에 하기로 하고 우선 pass 로 빈 클래스를 만듭니다.</p>

<p>이 클래스를 방금 admin.site.register 로 Entries 모델을 등록하는 부분에 추가합니다.</p>

<blockquote>
<pre><code>admin.site.register(Entries, EntriesAdmin)</code></pre>
</blockquote>

<p>이렇게 register 메서드에 두 번째 인자로 넣는 겁니다.</p>

<p>이제 글 번호, 제목, 작성일시가 뜨게 해보겠습니다. 간단합니다. EntriesAdmin 클래스에 아래 내용을 써넣습니다.</p>

<p>list_display = ('id', 'Title','created',)</p>

<p>list_display 라는 클래스 프로퍼티에 튜플 자료형으로 출력할 모델 요소를 문자열로 담는 겁니다. 기존 방법과 같습니다.</p>

<blockquote>
<pre><code>class EntriesAdmin(admin.ModelAdmin):
    list_display = ('id', 'Title','created',)</code></pre>
</blockquote>

<p>코드는 이렇게 생겼습니다.</p>

<p>이외에도 좀 더 다양한 변화를 줄 수 있습니다. 자세한 내용은 공식 문서(<a href="http://docs.djangoproject.com/en/dev/ref/contrib/admin/#ref-contrib-admin">The Django admin site</a>)를 참조하시길 바랍니다.</p>

<h4>urls.py 내용 바꾸기</h4>

<p>이걸로 끝이면 좋겠는데, urls.py 에서 Admin 영역에 접근하는 방법도 바뀌었습니다.</p>

<p>먼저 urls.py 맨 위에다가</p>

<blockquote>
<pre><code>from django.contrib import admin
admin.autodiscover()</code></pre>
</blockquote>

<p>를 넣습니다. 그런 뒤 주소 체계는 아래와 같이 넣으면 됩니다.</p>

<blockquote>
<pre><code>    (r'^admin/(.*)', admin.site.root),</code></pre>
</blockquote>

<p>Django 1.0판에서 프로젝트를 만들면(django-admin.py startproject hannal) 이러한 내용은 이미 반영되어 있으니 크게 어렵진 않을 겁니다.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2009/2/a_problem_that_be_blocked_a_waterway_of_sink/">
        싱크대 배수구 막힘 문제
      </a>
    </h1>

    <span class="post-date">01 Feb 2009</span>

    <p>얼마 전에 설거지대(싱크대)에 연결된 배수구가 막힌 적이 있다. 큼직한 덩어리를 배수구로 버리지 않았는데 막힌 걸 보니 분해용액으로 뚫을 수 있겠다 생각했다. 하지만, 1리터짜리 분해용액을 두 통이나 썼는데도 별 효과가 없었다. 며칠 고생한 끝에 마침내 뚫었고, 뚫으려고 이리 저리 고생하고 고민하여 얻은 교훈과 경험을 공유해본다.</p>

<h3>1. 왜 막히는가?</h3>

<p>이유는 단순하다. 배수구나 배수관을 막는 무언가를 버렸기 때문이다. 배수구는 보기와는 달리 음식물을 떠내려 보내기엔 좁다. 그래서 남은 밥이나 반찬을 버리면 금방 막힌다.</p>

<p>배수구를 막을만한 것을 버리지 않았는데도 막히는 경우도 있다. 한 번에 큼직한 걸 버리지 않아도 막힐 수 있다. 주로 <strong>기름(지방)이 원인</strong>이다. 라면을 끓여먹으면 기름이 둥둥 떠다니든데 이런 기름을 버리면 배수관에 조금씩 붙어 단단해진다. 마치 포화 지방이 핏줄(혈관)에 쌓여 큰 문제를 일으키듯이, 이런 기름도 서서히 쌓여 배수관을 좁히는 것이다. 그래서 예전에는 잘 내려가던 음식물 찌꺼기, 예를 들면 조각난 대파나 밥알이 어느 순간 턱 막히는 것이다.</p>

<h3>2. 예방하기</h3>

<p>큰 덩어리를 배수구로 버리지 않는 건 평소에 조금만 신경쓰면 충분히 예방할 수 있다. 배수구 걸림망을 사다 꽂기만 해도 이런 문제는 거의 일어나지 않는다.</p>

<p>배수관에 조금씩 찌꺼기가 쌓이는 건 좀 더 신경을 써야 한다. 기름기가 많은 그릇이나 냄비를 설거지 할 때에 이 기름이 배수관에 쌓이지 않게 따뜻한 물로 설거지를 하는 게 좋다. 설거지를 마친 후 뜨거운 물을 부어주면 더 좋다. 차가운 물로 설거지를 하면 기름이 빨리 굳기 때문이다.</p>

<h3>3. 뚫기</h3>

<p>기름으로 배수관이 좁아졌다가 막힌 경우엔 분해용액으로 뚫을 수 있다. 1리터짜리가 약 3,000원쯤 하는데, 이걸 사다 붓으면 분해용액이 찌꺼기를 녹인다. 30~60분 후에 뜨거운 물을 부으면 어지간해서는 뚫린다. 안 뚫리면 붓고 6~8시간 정도 기다렸다가 다시 하면 된다.</p>

<p>그러나, 섬유소는 잘 녹지 않는다. 기름때가 쌓여 배수관이 좁아진 상태에서 채소나 과일을 많이(사람 눈으로 보기엔 분명 적은 양이지만) 버리면 이것들이 층층히 쌓인다. 이때엔 분해용액을 아무리 써도 좀처럼 뚫리지 않는다. 부엌이나 방안에 독한 알카리액 냄새만 풍길 뿐이다.</p>

<p>이럴 때엔 직접 뚫어야 한다. 그런데 세면대나 변기와 달리 설거지대는 막힌 배수구나 배수관을 뚫기가 쉽지 않다. 변기나 세면대처럼 배수구가 한 곳이면 그곳을 배수구 소통기로 막고 압력을 가하면 대체로 금방 뚫을 수 있다. 그러나 설거지대엔 설거지하면서 넘치거나 차오르는 물을 빼주는 작은 배수구가 설거지대 안쪽 옆에 있어서 배수구 소통기(일명 뚫어뻥)를 쓸 수 없기 때문이다.</p>

<p>이 상황에 좌절하여 뚫기를 포기하고 전문가를 불러 해결한다. 보통 3~5만원이라고 한다. 물론 바닥을 드러내야 할 만큼 대형 공사를 해야 하는 경우엔 돈이 왕창 깨진다. 이건 우리가 어찌하기 어렵다. 하지만, 3~5만원으로 해결되는 일은 우리도 충분히 할 수 있다.</p>

<p>먼저 뚫을 도구가 있어야 한다. 크게 두 가지를 들 수 있다.</p>

<ul>
<li>배수구 관통기 : 철물점에서 약 1만원으로 살 수 있다.</li>
<li>쇠 옷걸이 : 쇠를 구부려 만든 옷걸이이며, 보통은 세탁소에서 옷을 맡기면 얻는다.</li>
</ul>

<p>배수구 관통기나 쇠 옷걸이나 원리는 같다. 그러니 쇠 옷걸이가 있으면 이걸 써도 괜찮다. 옷걸이를 편 뒤 고리를 꽈악 눌러 갈고리처럼 하면 좋다. 옷걸이를 다 펴면 약 1m 정도 된다. 만약 설거지대에 연결된 배수관이 U자 모양으로 휜 쇠붙이라면 배수구 관통기를 사야 한다. 이 관통기에 들어가 있는 관통쇠는 휘기 때문이다.</p>

<p>도구를 준비했으면 플라스틱 배수관을 설거지대에서 분리해야 한다. 이미 막혀서 물이 내려가지 않은 경우라면 배수관에 물이 고여있으므로 세수대야나 큰 냄비를 준비해 쏟아질 물을 받아야 한다.</p>

<p>이제 이 도구로 배수구와 배수구를 열심히 쑤신다. 최대한 깊이 쑤신다. 옷걸이를 개조해서 쓰는 경우 옷걸이를 놓치지 않게 주의한다. 오랫동안 땀나게 쑤실 필요는 없다. 한 열 댓 번 정도 쑤시면 된다. 물을 부어 흘러내려가는지 확인한다. 안 내려가면 더 쑤셔서 물이 내려갈 때까지 쑤신다.</p>

<p>물이 빠지면 배수관을 설거지대에 연결한다. 혹시 모르니 분해용액을 써서 남은 기름때를 녹여보낸다.</p>

<p>만약, 큰 덩어리를 넣어서 막힌 경우라면 딱히 답이 없다. 되도록 그 덩어리를 끄집어내보고, 안 되면 최대한 쑤시고 녹여야 한다. 그래도 안 되면 전문가를 불러 자신이 벌인 무신경한 실수에 대해 큰 돈으로 대가를 치르라.</p>

<h3>4. 주의할 점</h3>

<p>분해용액을 너무 많이 자주 쓰면 안 좋다. 플라스틱 배수관이 상하기 때문이다. 물론, 배수관으로 쓰는 플라스틱은 산성과 알카리성에 강한 성질이 있고, 분해용액 자체가 플라스틱을 바로 녹일만큼 독하지도 않다. 그렇게 독하다면 분해용액은 유리병이나 캔에 담아 팔았을 것이다. 그래도 너무 남용하는 건 좋지 않다.</p>

<p>이사를 간 경우도 주의해야 한다. 새로 지어서 자신이 첫 입주자라면 모를까, 그게 아니라면 전에 살던 사람이 있다. 만약 그 사람이 개념없이 음식물 쓰레기나 기름을 마구 버렸는데 당신이 입주하자 막힐 수도 있다. 뒤집어 쓰는 것이다. 그러므로 새로 이사왔다고 긴장을 풀고 설거지에 임한다면 나처럼 며칠을 분해용액 냄세(락스 냄새와 같다)에 시달릴 것이다.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page74">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page72">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33535239-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
